<!DOCTYPE html>

<html lang="en">

    <head>

        <meta charset="UTF-8">
        <title>Brotherhood - Liste des questionnaires</title>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

    </head>

    <body>

        <a href="../../home">Retourner au menu principal</a>
        <h1>Liste des questionnaires</h1>

        <table id="surveys">

            <tr>

                <th>Image</th>
                <th>Nom</th>
                <th>Bar√®me</th>
                <th>Essais</th>
                <th>Date limite</th>

            </tr>

        </table>

        <script>

            var table = $("#surveys") ;

            $.getJSON("./surveys", function(data)
            {
                $.each(data, function(key, val)
                {
                    var dom = "<tr>" ;

                    dom += "<td id='image' value=" + val["imageId"] + ">" + val["imageId"] + "</td>" ;
                    dom += "<td>" + val["name"] + "</td>" ;
                    dom += "<td>" + val["mark"] + "</td>" ;
                    dom += "<td>" + val["chances"] + "</td>" ;
                    dom += "<td>" + val["deadLine"] + "</td>" ;

                    dom += "<td><button onclick='deleteSurvey(" + val["id"] + ")'>Supprimer</button></td>" ;

                    table.append(dom + "</tr>") ;
                }) ;
            }) ;


            function manageSurvey(id)
            {
                window.location.replace("manageSurvey.html?id=" + id) ;
            }

            function deleteSurvey(id)
            {
                window.location.replace("deleteSurvey.html?id=" + id) ;
            }

        </script>

    </body>

</html>
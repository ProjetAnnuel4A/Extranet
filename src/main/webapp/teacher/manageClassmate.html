<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>Brotherhood - Afficher les classes</title>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
</head>
<body>
	<a href="../../home">Retourner au menu principal</a>
	<h1>Gérer une classe</h1>

	<table id="classmates">
	</table>

	<script>
	var getUrlParameter = function getUrlParameter(sParam) {
		    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
		        sURLVariables = sPageURL.split('&'),
		        sParameterName,
		        i;

		    for (i = 0; i < sURLVariables.length; i++) {
		        sParameterName = sURLVariables[i].split('=');

		        if (sParameterName[0] === sParam) {
		            return sParameterName[1] === undefined ? true : sParameterName[1];
		        }
		    }
		};
		var idTeacher = getUrlParameter('idTeacher');
		var table = $("#classmates");
		$.getJSON("./classmates/getClassmatesForTeacher?idTeacher="+idTeacher, function( data ) {
			$.each( data, function( key, val ) {
				var dom = "<tr>";
				$.each(val, function(k, v){
					if(k != "id"){
						if(k == "classmateName")
							dom += "<td>"+v+"</td>";
					}else{
						dom += "<td><button onclick='addMark("+v+")'>Gérer</button></td>";
					}
				});
				table.append(dom + "</tr>");
			});
  		});
  		function addMark(id){
  			window.location.replace("addMark.html?id="+id);
  		}
	</script>
</body>
</html>